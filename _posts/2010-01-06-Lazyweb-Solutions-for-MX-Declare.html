---
layout: article
title: LazyWeb? Solutions for using MX::Declare and PerlTidy?
tags: lazyweb, moose, moosex::declare, perl, perltidy
---
<p>Dear Lazyweb. </p>

<p> I've been fighting for a while with this minor headache. </p>

<p>Using PerlTidy and MooseX::Declare in conjunction results in pain. </p>

<p>Here is a sample of the sort of indentation that results:</p>

<p>Input:</p>

{%highlight perl %}
use MooseX::Declare;

class Foo  {

  method Simple { 
    my $foo = 1;
    $foo = $foo + 1;
    if( $foo ) {
      $foo++;
    }
  }
  
  method SimpleArgs ( $arg, $arg ) { 
    my $foo = 1;
    $foo = $foo + 1;
    if( $foo ) {
      $foo++;
    }
  }
  
  method NamedArgs ( :$argname , :$otherarg ) { 
    my $foo = 1;
    $foo = $foo + 1;
    if( $foo ) {
      $foo++;
    }
  }
}
{%endhighlight%}

<p>And the indentation after going through PerlTidy:</p>

{%highlight perl%}
use MooseX::Declare;

class Foo {

  method Simple {

    my $foo = 1;
    $foo = $foo + 1;
    if ($foo) {
      $foo++;
    }
  }

  method SimpleArgs( $arg, $arg ) {
    my $foo = 1;
      $foo = $foo + 1;
      if ($foo) {
      $foo++;
    }
    }

    method NamedArgs( : $argname, : $otherarg ) {
    my $foo = 1;
      $foo = $foo + 1;
      if ($foo) {
      $foo++;
    }
    };
}
{%endhighlight%}

<p>You might notice the second example is both ugly, and refuses to function.</p>

<p>I gripe about it every now and then to various peoples, and the results tend towards 2 options:</p>

<ul><li>Don't use PerlTidy</li><li>Don't use MooseX::Declare</li></ul>

<p>Neither of those are much of an option to me. I really like keeping formatting and indentation consistent right across a project, but hand adjusting everything is just too much pain. </p>

<p>Some people tell me that I should just tweak my editor to do this for me, but that hardly works, I am yet to see an editor that handles Perl indentation intelligently enough for my liking. Additionally, some editors don't even really have features that tidy indentation and clean up end-of-line whitespace yet, while supporting heaps of other features I want. </p>

<p>Lately, I've been swayed towards using Padre, and its a handy interface for Perl coding, but there's still a massive void in the domain of keeping code tidy. The very best I can find is the Padre PerlTidy plugin, but that has all the same caveats PerlTidy has, so in this case, "just using my editors features" results in PerlTidy being the weak point yet again. </p>

<p>As far as I can make out, there's nothing even slightly comparable to PerlTidy, I cannot seem to see anything else that does anything remotely like it, not even on a more simplistic scale. </p>

<p>So, Dear Lazyweb, please scratch my itch.</p>
