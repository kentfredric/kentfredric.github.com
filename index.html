<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Kent Fredric's Projects on GitHub</title>
    <link rel="stylesheet" type="text/css" href="style.css" />
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
  </head>
  <body>
    <h1>Work In Progress</h1>
    <h2>Perl Modules</h2>
    <div>
      <div class="crossref">
        <div class="name">Data::Couplet</div>
        <div class="abstract">A <span class="term">key</span> &#8596; <span class="term">value</span> coupling mechanisim for <span class="noun">Perl</span>
        </div>
        <div class="link">
          <a href="/Data-Couplet/">link</a>
        </div>
      </div>
    </div>
    <script type="text/javascript">
      document.debugfn = function( i ){ 
        console.log( i );
        window.lastdebbug = i;
      };
      jQuery(function($){

          var createFalseLink = function( link ) {
            return function(iino, iitem){ 
              var ilink = link.clone(1);
              ilink.empty();
              ilink.click(function(event){
                event.preventDefault();
                return false;
              });
              $(iitem).wrapInner(ilink);
            };
          };

          var fetchInject = function( item ) { 
              return function( data, TextStatus ){
                $(item).css({backgroundColor: '#eeffee'});
                $("div.content",item).remove();
                $(item).append($(document.createElement('div')).addClass('content'));
                document.debugfn(data);
                var d0m = $(data);
                $("div.content", item).append( $('body', d0m) );
              };
          };


          var clickSetup = function( link, item ) { 
            return function () { 
              $(item).css({backgroundColor: '#eeeeee'});
              var linkdest = link.attr('href');
              console.log( linkdest );
              $.get(linkdest, fetchInject( item ), 'html');
            };
          };

          $('div.crossref').each(function(ino, item){ 
            var link = $("div.link a:eq(0)", item);
            link.parent().remove();
            $(item).css({backgroundColor: '#ffeeee'});
            $(item).children().each(createFalseLink(link));
            $(item).click(clickSetup( link, item ));
          });
      });
    </script>
  </body>
</html>
