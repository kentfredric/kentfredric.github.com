jQuery(function(a){Module("nz.geek.fox",function(){Joose.Managed.Attribute.meta.extend({does:[JooseX.Attribute.Lazy]});Class("ContentBox",{has:{parentNode:{isa:"Str",is:"ro",required:1},container:{isa:"Obj",is:"rw",predicate:"hasContainer",lazy:"_buildContainer"},content:{isa:"Obj",is:"rw",predicate:"hasContent",lazy:"_buildContent"},populate:{is:"rw",required:1}},methods:{_buildContainer:function(){var b=document.createElement("div");a(b).addClass("content");a(this.getParentNode()).append(a(b));
return a(b)},_buildContent:function(){var b=this.getPopulate();a(this.getContainer()).append(b(this.getContainer()))},hide:function(){a(this.getContainer()).slideUp("fast")},show:function(){this.getContent();a(this.getContainer()).slideDown("fast")},emptyContainer:function(){this.getContainer().empty();return this.getContainer()},loadContent:function(a,c){this.getContainer().load(a,function(){c(this)})}}});Class("HotSection",{has:{title:{isa:"Str",is:"ro",required:1},link:{isa:"Str",is:"ro",required:1},
node:{isa:"Obj",is:"ro",required:1},content:{isa:"Obj",is:"rw",lazy:"_buildContent"}},after:{initialize:function(){var b=this;a(this.node).find("div.link").remove();a(this.node).children(".name").each(function(c,e){var d=a(document.createElement("a")).attr("href",b.link);d.click(function(){return!1});a(e).wrapInner(d)});a(this.node).toggle(function(){b.fullmode()},function(){b.barmode()})}},methods:{_buildContent:function(){var a=this;return new nz.geek.fox.ContentBox({parentNode:a.getNode(),populate:function(c){c.load(a.getLink());
return"<span>Loading</span>"}})},fullmode:function(){this.getContent().show();a(this.node).children().not("div.content").slideUp("fast")},barmode:function(){a(this.node).children().not("div.content").slideDown("fast");this.getContent().hide()}}})});a("div.crossref").each(function(b,c){c.HotSection=new nz.geek.fox.HotSection({title:a(c).find("div.name").text(),link:a(c).find("div.link a:eq(0)").attr("href"),node:c})})});
